<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8' />
  <title>Global COVID-19 Vaccinations</title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

  <!-- mapbox-gl.css here -->
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v2.7.0/mapbox-gl.css' rel='stylesheet' />
  <!-- Rubik font -->
  <link href="https://fonts.googleapis.com/css?family=Rubik&display=swap" rel="stylesheet">

  <style>
    /* basic css to style the viewer goes here */
    body {
      margin: 0;
      padding: 0;
    }

    #map {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 100%;
      background-color: rgba(255, 255, 255, 1.0);
    }

    /* set styles for the container holding the title and slider */
    .session {
      position: absolute;
      z-index: 1;
      background-color: rgba(255, 255, 255, 0.5);
      border-radius: 3px;
      box-shadow: 0px 0px 0px 1px rgba(0, 0, 0, 0.3);
      top: 10px;
      left: 10px;
      padding: 5px;
    }

    /* set styles for the container holding the year legend */
    .container {
      display: table;
      width: 100%;
      margin: 0;
    }

    /* set font styles for the title */
    h1 {
      font-size: 20px;
      font-family: 'Rubik', sans-serif;
      padding-bottom: 0px;
      padding-top: 0px;
      font-weight: normal;
    }

    /* set font styles for the identified year */
    h2 {
      cursor: pointer;
      font-size: 14px;
      font-family: 'Rubik', sans-serif;
      padding-bottom: 0px;
      padding-top: 0px;
      font-weight: normal;
      width: 50%;
      text-align: left;
      display: table-cell;
    }

    /* define the slider width and change the cursor to a pointer on hover */
    #slider {
      cursor: pointer;
      width: 275px;
    }
  </style>

</head>

<body>

  <!-- id the map div -->
  <div id='map'></div>

  <!-- title and time slider -->
  <div class='session' id='sliderbar'>
    <!-- the shown title of the map -->
    <h1>Fully Vaccinated for COVID-19<br>Per 100 People</h1>
    <div class='container'>
      <!-- the selected year -->
      <h2>Date: <label id='active-date'>2459819</label></h2>
    </div>
    <!-- the slider has a range of julian day numbers from 2459197 to 2459819, intervals of 1 day, and an initial value of 2459819 -->
    <input id='slider' class='row' type='range' min='2459197' max='2459819' step='1' value='2459819' />
  </div>

  <!-- mapbox-gl.js library -->
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v2.7.0/mapbox-gl.js'></script>
  <!-- d3 js -->
  <script src="https://d3js.org/d3.v6.min.js"></script>
  <!-- jQuery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

  <script>

    // define the initial slider-selected date
    const cursoryDate = document.getElementById('slider').value;

    // convert this date to a numeric value
    const numDate = parseInt(cursoryDate);

    // convert the initial julian day to a gregorian calendar date
    const initDate = gregorianDate(cursoryDate);

    // define a style for the vector tiles
    const style = {"version":8,"name":"Light","metadata":{"mapbox:autocomposite":!0,"mapbox:type":"default","mapbox:origin":"light-v9","mapbox:groups":{"1444934828655.3389":{"name":"Aeroways","collapsed":!0},"1444933322393.2852":{"name":"POI labels  (scalerank 1)","collapsed":!0},"1444862578782.6787":{"name":"Road labels","collapsed":!0},"1444855786460.0557":{"name":"Roads","collapsed":!0},"1444934295202.7542":{"name":"Admin boundaries","collapsed":!0},"1444856151690.9143":{"name":"State labels","collapsed":!0},"1444933721429.3076":{"name":"Road labels","collapsed":!0},"1444933358918.2366":{"name":"POI labels (scalerank 2)","collapsed":!0},"1444933808272.805":{"name":"Water labels","collapsed":!0},"1444933372896.5967":{"name":"POI labels (scalerank 3)","collapsed":!0},"1444855799204.86":{"name":"Bridges","collapsed":!0},"1444856087950.3635":{"name":"Marine labels","collapsed":!0},"1456969573402.7817":{"name":"Hillshading","collapsed":!0},"1444862510685.128":{"name":"City labels","collapsed":!0},"1444855769305.6016":{"name":"Tunnels","collapsed":!0},"1456970288113.8113":{"name":"Landcover","collapsed":!0},"1444856144497.7825":{"name":"Country labels","collapsed":!0}}},"sources":{"composite":{"url":"mapbox://mapbox.mapbox-terrain-v2,mapbox.mapbox-streets-v8","type":"vector"},"vaccinations":{"type":"vector","tiles":[location.origin+"/data/fully_vaxed/{z}/{x}/{y}.pbf"]}},"sprite":"mapbox://sprites/mapbox/light-v10","glyphs":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf","layers":[{"id":"background","type":"background","layout":{},"paint":{"background-color":"hsl(55, 11%, 96%)"}},{"id":"landcover_wood","type":"fill","metadata":{"mapbox:group":"1456970288113.8113"},"source":"composite","source-layer":"landcover","maxzoom":14,"filter":["==",["get","class"],"wood"],"layout":{},"paint":{"fill-color":"hsl(0, 0%, 89%)","fill-opacity":0.1,"fill-antialias":!1}},{"id":"landcover_scrub","type":"fill","metadata":{"mapbox:group":"1456970288113.8113"},"source":"composite","source-layer":"landcover","maxzoom":14,"filter":["==",["get","class"],"scrub"],"layout":{},"paint":{"fill-color":"hsl(0, 0%, 89%)","fill-opacity":0.1,"fill-antialias":!1}},{"id":"landcover_grass","type":"fill","metadata":{"mapbox:group":"1456970288113.8113"},"source":"composite","source-layer":"landcover","maxzoom":14,"filter":["==",["get","class"],"grass"],"layout":{},"paint":{"fill-color":"hsl(0, 0%, 89%)","fill-opacity":0.1,"fill-antialias":!1}},{"id":"landcover_crop","type":"fill","metadata":{"mapbox:group":"1456970288113.8113"},"source":"composite","source-layer":"landcover","maxzoom":14,"filter":["==",["get","class"],"crop"],"layout":{},"paint":{"fill-color":"hsl(0, 0%, 89%)","fill-opacity":0.1,"fill-antialias":!1}},{"id":"national_park","type":"fill","source":"composite","source-layer":"landuse_overlay","filter":["==",["get","class"],"national_park"],"layout":{},"paint":{"fill-color":"hsl(150, 6%, 93%)","fill-opacity":["interpolate",["linear"],["zoom"],5,0,6,0.5]}},{"id":"parks","type":"fill","source":"composite","source-layer":"landuse","filter":["==",["get","class"],"park"],"layout":{},"paint":{"fill-color":"hsl(150, 6%, 93%)","fill-opacity":["interpolate",["linear"],["zoom"],5,0,6,0.75]}},{"id":"pitch","type":"fill","source":"composite","source-layer":"landuse","filter":["==",["get","class"],"pitch"],"layout":{},"paint":{"fill-color":"hsl(150, 6%, 93%)"}},{"id":"industrial","type":"fill","source":"composite","source-layer":"landuse","filter":["==",["get","class"],"airport"],"layout":{},"paint":{"fill-color":"hsl(150, 6%, 93%)"}},{"id":"sand","type":"fill","source":"composite","source-layer":"landuse","filter":["==",["get","class"],"sand"],"layout":{},"paint":{"fill-color":"hsl(150, 6%, 93%)"}},{"id":"hillshade_highlight_bright","type":"fill","metadata":{"mapbox:group":"1456969573402.7817"},"source":"composite","source-layer":"hillshade","maxzoom":16,"filter":["==",["get","level"],94],"layout":{},"paint":{"fill-color":"#fff","fill-opacity":["interpolate",["linear"],["zoom"],14,0.08,16,0],"fill-antialias":!1}},{"id":"hillshade_highlight_med","type":"fill","metadata":{"mapbox:group":"1456969573402.7817"},"source":"composite","source-layer":"hillshade","maxzoom":16,"filter":["==",["get","level"],90],"layout":{},"paint":{"fill-color":"#fff","fill-opacity":["interpolate",["linear"],["zoom"],14,0.08,16,0],"fill-antialias":!1}},{"id":"hillshade_shadow_faint","type":"fill","metadata":{"mapbox:group":"1456969573402.7817"},"source":"composite","source-layer":"hillshade","maxzoom":16,"filter":["==",["get","level"],89],"layout":{},"paint":{"fill-color":"hsl(0, 0%, 35%)","fill-opacity":["interpolate",["linear"],["zoom"],14,0.033,16,0],"fill-antialias":!1}},{"id":"hillshade_shadow_med","type":"fill","metadata":{"mapbox:group":"1456969573402.7817"},"source":"composite","source-layer":"hillshade","maxzoom":16,"filter":["==",["get","level"],78],"layout":{},"paint":{"fill-color":"hsl(0, 0%, 35%)","fill-opacity":["interpolate",["linear"],["zoom"],14,0.033,16,0],"fill-antialias":!1}},{"id":"hillshade_shadow_dark","type":"fill","metadata":{"mapbox:group":"1456969573402.7817"},"source":"composite","source-layer":"hillshade","maxzoom":16,"filter":["==",["get","level"],67],"layout":{},"paint":{"fill-color":"hsl(0, 0%, 35%)","fill-opacity":["interpolate",["linear"],["zoom"],14,0.06,16,0],"fill-antialias":!1}},{"id":"hillshade_shadow_extreme","type":"fill","metadata":{"mapbox:group":"1456969573402.7817"},"source":"composite","source-layer":"hillshade","maxzoom":16,"filter":["==",["get","level"],56],"layout":{},"paint":{"fill-color":"hsl(0, 0%, 35%)","fill-opacity":["interpolate",["linear"],["zoom"],14,0.06,16,0],"fill-antialias":!1}},{"id":"waterway-river-canal","type":"line","source":"composite","source-layer":"waterway","minzoom":8,"filter":["any",["case",["==",["typeof",["get","class"]],"string"],["==",["get","class"],"canal"],!1],["case",["==",["typeof",["get","class"]],"string"],["==",["get","class"],"river"],!1]],"layout":{"line-cap":["step",["zoom"],"butt",11,"round"],"line-join":"round"},"paint":{"line-color":"#cbd3d4","line-width":["interpolate",["exponential",1.3],["zoom"],8.5,0.1,20,8],"line-opacity":["interpolate",["linear"],["zoom"],8,0,8.5,1]}},{"id":"water shadow","type":"fill","source":"composite","source-layer":"water","layout":{},"paint":{"fill-color":"hsl(185, 7%, 73%)","fill-translate":["interpolate",["exponential",1.2],["zoom"],7,["literal",[0,0]],16,["literal",[-1,-1]]],"fill-translate-anchor":"viewport","fill-opacity":1}},{"id":"water","type":"fill","source":"composite","source-layer":"water","layout":{},"paint":{"fill-color":"hsl(185, 9%, 81%)"}},{"id":"barrier_line-land-polygon","type":"fill","source":"composite","source-layer":"structure","filter":["all",["==",["geometry-type"],"Polygon"],["==",["get","class"],"land"]],"layout":{},"paint":{"fill-color":"#f0f5f3"}},{"id":"barrier_line-land-line","type":"line","source":"composite","source-layer":"structure","filter":["all",["==",["geometry-type"],"LineString"],["==",["get","class"],"land"]],"layout":{"line-cap":"round"},"paint":{"line-width":["interpolate",["exponential",1.99],["zoom"],14,0.75,20,40],"line-color":"#f0f5f3"}},{"id":"aeroway-polygon","type":"fill","metadata":{"mapbox:group":"1444934828655.3389"},"source":"composite","source-layer":"aeroway","minzoom":11,"filter":["all",["!=",["get","type"],"apron"],["==",["geometry-type"],"Polygon"]],"layout":{},"paint":{"fill-color":"hsl(0, 0%, 97%)","fill-opacity":["interpolate",["linear"],["zoom"],11,0,11.5,1]}},{"id":"aeroway-runway","type":"line","metadata":{"mapbox:group":"1444934828655.3389"},"source":"composite","source-layer":"aeroway","minzoom":9,"filter":["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"runway"]],"layout":{},"paint":{"line-color":"hsl(0, 0%, 95%)","line-width":["interpolate",["exponential",1.5],["zoom"],9,1,18,80]}},{"id":"aeroway-taxiway","type":"line","metadata":{"mapbox:group":"1444934828655.3389"},"source":"composite","source-layer":"aeroway","minzoom":9,"filter":["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"taxiway"]],"layout":{},"paint":{"line-color":"hsl(0, 0%, 95%)","line-width":["interpolate",["exponential",1.5],["zoom"],10,0.5,18,20]}},{"id":"building","type":"fill","source":"composite","source-layer":"building","minzoom":15,"filter":["all",["!=",["get","type"],"building:part"],["==",["get","underground"],"false"]],"layout":{},"paint":{"fill-color":"hsl(55, 5%, 91%)","fill-opacity":["interpolate",["linear"],["zoom"],15.5,0,16,1],"fill-outline-color":"hsl(55, 3%, 87%)"}},{"id":"tunnel-street-low","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"street"],["==",["get","structure"],"tunnel"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12.5,0.5,14,2,18,18],"line-color":"hsl(187, 7%, 88%)","line-opacity":["interpolate",["linear"],["zoom"],11.5,0,12,1,14,1,14.01,0]}},{"id":"tunnel-street_limited-low","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"street_limited"],["==",["get","structure"],"tunnel"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12.5,0.5,14,2,18,18],"line-color":"hsl(187, 7%, 88%)","line-opacity":["interpolate",["linear"],["zoom"],11.5,0,12,1,14,1,14.01,0]}},{"id":"tunnel-service-link-track-case","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["geometry-type"],"LineString"],["all",["!=",["get","type"],"trunk_link"],["==",["get","structure"],"tunnel"],["match",["get","class"],["trunk_link","primary_link","secondary_link","tertiary_link","service","track"],!0,!1]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsl(185, 12%, 89%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-dasharray":[3,3]}},{"id":"tunnel-street_limited-case","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"street_limited"],["==",["get","structure"],"tunnel"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsl(185, 12%, 89%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],13,0,14,2,18,18],"line-dasharray":[3,3],"line-opacity":["interpolate",["linear"],["zoom"],13.99,0,14,1]}},{"id":"tunnel-street-case","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"street"],["==",["get","structure"],"tunnel"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsl(185, 12%, 89%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],13,0,14,2,18,18],"line-dasharray":[3,3],"line-opacity":["interpolate",["linear"],["zoom"],13.99,0,14,1]}},{"id":"tunnel-secondary-tertiary-case","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["secondary","tertiary"],!0,!1]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.2],["zoom"],10,0.75,18,2],"line-dasharray":[3,3],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],8.5,0.5,10,0.75,18,26],"line-color":"hsl(185, 12%, 89%)"}},{"id":"tunnel-primary-case","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"primary"],["==",["get","structure"],"tunnel"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,16,2],"line-dasharray":[3,3],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":"hsl(185, 12%, 89%)"}},{"id":"tunnel-trunk_link-case","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","structure"],"tunnel"],["==",["get","type"],"trunk_link"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsl(185, 12%, 89%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-dasharray":[3,3]}},{"id":"tunnel-motorway_link-case","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"motorway_link"],["==",["get","structure"],"tunnel"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsl(185, 12%, 89%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-dasharray":[3,3]}},{"id":"tunnel-trunk-case","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","structure"],"tunnel"],["==",["get","type"],"trunk"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,16,2],"line-color":"hsl(185, 12%, 89%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-opacity":1,"line-dasharray":[3,3]}},{"id":"tunnel-motorway-case","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"motorway"],["==",["get","structure"],"tunnel"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,16,2],"line-color":"hsl(185, 12%, 89%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-opacity":1,"line-dasharray":[3,3]}},{"id":"tunnel-construction","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"construction"],["==",["get","structure"],"tunnel"]]],"layout":{"line-join":"miter"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12.5,0.5,14,2,18,18],"line-color":"hsl(187, 7%, 88%)","line-opacity":["interpolate",["linear"],["zoom"],13.99,0,14,1],"line-dasharray":["step",["zoom"],["literal",[0.4,0.8]],15,["literal",[0.3,0.6]],16,["literal",[0.2,0.3]],17,["literal",[0.2,0.25]],18,["literal",[0.15,0.15]]]}},{"id":"tunnel-path","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["!=",["get","type"],"steps"],["==",["get","class"],"path"],["==",["get","structure"],"tunnel"]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[1,0.5]]],"line-color":"hsl(0, 0%, 85%)","line-opacity":["interpolate",["linear"],["zoom"],14,0,14.25,1]}},{"id":"tunnel-steps","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","structure"],"tunnel"],["==",["get","type"],"steps"]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(0, 0%, 85%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[0.3,0.3]]],"line-opacity":["interpolate",["linear"],["zoom"],14,0,14.25,1]}},{"id":"tunnel-trunk_link","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","structure"],"tunnel"],["==",["get","type"],"trunk_link"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":"hsl(187, 7%, 88%)","line-opacity":1,"line-dasharray":[1,0]}},{"id":"tunnel-motorway_link","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"motorway_link"],["==",["get","structure"],"tunnel"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":"hsl(187, 7%, 88%)","line-opacity":1,"line-dasharray":[1,0]}},{"id":"tunnel-pedestrian","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"pedestrian"],["==",["get","structure"],"tunnel"]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"hsl(187, 7%, 88%)","line-opacity":1,"line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.5,0.4]],16,["literal",[1,0.2]]]}},{"id":"tunnel-service-link-track","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["geometry-type"],"LineString"],["all",["!=",["get","type"],"trunk_link"],["==",["get","structure"],"tunnel"],["match",["get","class"],["trunk_link","primary_link","secondary_link","tertiary_link","service","track"],!0,!1]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"hsl(187, 7%, 88%)","line-dasharray":[1,0]}},{"id":"tunnel-street_limited","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"street_limited"],["==",["get","structure"],"tunnel"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12.5,0.5,14,2,18,18],"line-color":"hsl(187, 7%, 88%)","line-opacity":["interpolate",["linear"],["zoom"],13.99,0,14,1]}},{"id":"tunnel-street","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"street"],["==",["get","structure"],"tunnel"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12.5,0.5,14,2,18,18],"line-color":"hsl(187, 7%, 88%)","line-opacity":["interpolate",["linear"],["zoom"],13.99,0,14,1]}},{"id":"tunnel-secondary-tertiary","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["secondary","tertiary"],!0,!1]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],8.5,0.5,10,0.75,18,26],"line-color":"hsl(187, 7%, 88%)","line-opacity":1,"line-dasharray":[1,0],"line-blur":0}},{"id":"tunnel-primary","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"primary"],["==",["get","structure"],"tunnel"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":"hsl(187, 7%, 88%)","line-opacity":1,"line-dasharray":[1,0],"line-blur":0}},{"id":"tunnel-trunk","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"trunk"],["==",["get","structure"],"tunnel"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":"hsl(187, 7%, 88%)"}},{"id":"tunnel-motorway","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"motorway"],["==",["get","structure"],"tunnel"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-dasharray":[1,0],"line-opacity":1,"line-color":"hsl(187, 7%, 88%)","line-blur":0}},{"id":"road-pedestrian-case","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"pedestrian"],["==",["get","structure"],"none"]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,2,18,14.5],"line-color":["interpolate",["linear"],["zoom"],9,"hsl(156, 7%, 87%)",11,"#e8edeb"],"line-gap-width":0,"line-opacity":["interpolate",["linear"],["zoom"],6,0,7,0.4,9,0.5,10,1]}},{"id":"road-street-low","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"street"],["==",["get","structure"],"none"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12.5,0.5,14,2,18,18],"line-color":"#fff","line-opacity":["interpolate",["linear"],["zoom"],11,0,11.25,1,14,1,14.01,0]}},{"id":"road-street_limited-low","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"street_limited"],["==",["get","structure"],"none"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12.5,0.5,14,2,18,18],"line-color":"#fff","line-opacity":["interpolate",["linear"],["zoom"],11,0,11.25,1,14,1,14.01,0]}},{"id":"road-service-link-track-case","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["geometry-type"],"LineString"],["all",["!=",["get","type"],"trunk_link"],["match",["get","class"],["trunk_link","primary_link","secondary_link","tertiary_link","service","track"],!0,!1],["match",["get","structure"],["bridge","tunnel"],!1,!0]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":["interpolate",["linear"],["zoom"],9,"hsl(156, 7%, 87%)",11,"#e8edeb"],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-opacity":["interpolate",["linear"],["zoom"],6,0,7,0.4,9,0.5,10,1]}},{"id":"road-street_limited-case","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"street_limited"],["==",["get","structure"],"none"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":["interpolate",["linear"],["zoom"],9,"hsl(156, 7%, 87%)",11,"#e8edeb"],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],13,0,14,2,18,18],"line-opacity":["interpolate",["linear"],["zoom"],6,0,7,0.4,9,0.5,10,1]}},{"id":"road-street-case","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"street"],["==",["get","structure"],"none"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":["interpolate",["linear"],["zoom"],9,"hsl(156, 7%, 87%)",11,"#e8edeb"],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],13,0,14,2,18,18],"line-opacity":["interpolate",["linear"],["zoom"],6,0,7,0.4,9,0.5,10,1]}},{"id":"road-main-case","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["match",["get","class"],["secondary","tertiary"],!0,!1],["match",["get","structure"],["bridge","tunnel"],!1,!0]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.2],["zoom"],10,0.75,18,2],"line-color":["interpolate",["linear"],["zoom"],9,"hsl(156, 7%, 87%)",11,"#e8edeb"],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],8.5,0.5,10,0.75,18,26],"line-opacity":["interpolate",["linear"],["zoom"],6,0,7,0.4,9,0.5,10,1]}},{"id":"road-primary-case","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"primary"],["match",["get","structure"],["bridge","tunnel"],!1,!0]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,16,2],"line-color":["interpolate",["linear"],["zoom"],9,"hsl(156, 7%, 87%)",11,"#e8edeb"],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-opacity":["interpolate",["linear"],["zoom"],6,0,7,0.4,9,0.5,10,1]}},{"id":"road-motorway_link-case","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":10,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"motorway_link"],["match",["get","structure"],["bridge","tunnel"],!1,!0]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":["interpolate",["linear"],["zoom"],9,"hsl(156, 7%, 87%)",11,"#e8edeb"],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-opacity":["interpolate",["linear"],["zoom"],6,0,7,0.4,9,0.5,10,1]}},{"id":"road-trunk_link-case","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","type"],"trunk_link"],["match",["get","structure"],["bridge","tunnel"],!1,!0]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":["interpolate",["linear"],["zoom"],9,"hsl(156, 7%, 87%)",11,"#e8edeb"],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-opacity":["interpolate",["linear"],["zoom"],6,0,7,0.4,9,0.5,10,1]}},{"id":"road-trunk-case","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":5,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"trunk"],["match",["get","structure"],["bridge","tunnel"],!1,!0]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],7,0.5,10,1,16,2],"line-color":["interpolate",["linear"],["zoom"],9,"hsl(156, 7%, 87%)",11,"#e8edeb"],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.5,9,1.4,18,32],"line-opacity":["interpolate",["linear"],["zoom"],6,0,6.1,1]}},{"id":"road-motorway-case","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"motorway"],["match",["get","structure"],["bridge","tunnel"],!1,!0]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],7,0.5,10,1,16,2],"line-color":["interpolate",["linear"],["zoom"],9,"hsl(156, 7%, 87%)",11,"#e8edeb"],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-opacity":1}},{"id":"road-construction","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"construction"],["==",["get","structure"],"none"]]],"layout":{"line-join":"miter"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12.5,0.5,14,2,18,18],"line-color":"#fff","line-opacity":["interpolate",["linear"],["zoom"],13.99,0,14,1],"line-dasharray":["step",["zoom"],["literal",[0.4,0.8]],15,["literal",[0.3,0.6]],16,["literal",[0.2,0.3]],17,["literal",[0.2,0.25]],18,["literal",[0.15,0.15]]]}},{"id":"road-sidewalks","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":16,"filter":["all",["==",["geometry-type"],"LineString"],["all",["match",["get","structure"],["bridge","tunnel"],!1,!0],["match",["get","type"],["crossing","sidewalk"],!0,!1]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"#fff","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[1,0.5]]],"line-opacity":["interpolate",["linear"],["zoom"],16,0,16.25,1]}},{"id":"road-path","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"path"],["match",["get","structure"],["bridge","tunnel"],!1,!0],["match",["get","type"],["crossing","sidewalk","steps"],!1,!0]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"#fff","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[1,0.5]]],"line-opacity":["interpolate",["linear"],["zoom"],14,0,14.25,1]}},{"id":"road-steps","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","type"],"steps"],["match",["get","structure"],["bridge","tunnel"],!1,!0]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"#fff","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[0.3,0.3]]],"line-opacity":["interpolate",["linear"],["zoom"],14,0,14.25,1]}},{"id":"road-trunk_link","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","type"],"trunk_link"],["match",["get","structure"],["bridge","tunnel"],!1,!0]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":"#fff","line-opacity":1}},{"id":"road-motorway_link","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":10,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"motorway_link"],["match",["get","structure"],["bridge","tunnel"],!1,!0]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":"#fff","line-opacity":1}},{"id":"road-pedestrian","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"pedestrian"],["==",["get","structure"],"none"]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"#fff","line-opacity":1,"line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.5,0.4]],16,["literal",[1,0.2]]]}},{"id":"road-service-link-track","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["geometry-type"],"LineString"],["all",["!=",["get","type"],"trunk_link"],["match",["get","class"],["trunk_link","primary_link","secondary_link","tertiary_link","service","track"],!0,!1],["match",["get","structure"],["bridge","tunnel"],!1,!0]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"#fff"}},{"id":"road-street_limited","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"street_limited"],["==",["get","structure"],"none"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12.5,0.5,14,2,18,18],"line-color":"#fff","line-opacity":["interpolate",["linear"],["zoom"],13.99,0,14,1]}},{"id":"road-street","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"street"],["==",["get","structure"],"none"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12.5,0.5,14,2,18,18],"line-color":"#fff","line-opacity":["interpolate",["linear"],["zoom"],13.99,0,14,1]}},{"id":"road-secondary-tertiary","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["match",["get","class"],["secondary","tertiary"],!0,!1],["match",["get","structure"],["bridge","tunnel"],!1,!0]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],8.5,0.5,10,0.75,18,26],"line-color":"#fff","line-opacity":["interpolate",["exponential",1.2],["zoom"],5,0,5.5,1]}},{"id":"road-primary","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"primary"],["match",["get","structure"],["bridge","tunnel"],!1,!0]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":"#fff","line-opacity":["interpolate",["exponential",1.2],["zoom"],5,0,5.5,1]}},{"id":"road-trunk","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":5,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"trunk"],["match",["get","structure"],["bridge","tunnel"],!1,!0]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.5,9,1.4,18,32],"line-color":"#fff","line-opacity":1}},{"id":"road-motorway","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"motorway"],["match",["get","structure"],["bridge","tunnel"],!1,!0]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":"#fff","line-opacity":1}},{"id":"road-rail","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["all",["match",["get","class"],["major_rail","minor_rail","service_rail"],!0,!1],["match",["get","structure"],["bridge","tunnel"],!1,!0]]],"layout":{"line-join":"round"},"paint":{"line-color":"#e8edeb","line-width":["interpolate",["linear"],["zoom"],14,0.75,20,1]}},{"id":"bridge-pedestrian-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"pedestrian"],["==",["get","structure"],"bridge"]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,2,18,14.5],"line-color":"#e8edeb","line-gap-width":0,"line-opacity":["interpolate",["linear"],["zoom"],13.99,0,14,1]}},{"id":"bridge-street-low","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"street"],["==",["get","structure"],"bridge"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12.5,0.5,14,2,18,18],"line-color":"#fff","line-opacity":["interpolate",["linear"],["zoom"],11.5,0,12,1,14,1,14.01,0]}},{"id":"bridge-street_limited-low","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"street_limited"],["==",["get","structure"],"bridge"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12.5,0.5,14,2,18,18],"line-color":"#fff","line-opacity":["interpolate",["linear"],["zoom"],11.5,0,12,1,14,1,14.01,0]}},{"id":"bridge-service-link-track-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["geometry-type"],"LineString"],["all",["!=",["get","type"],"trunk_link"],["==",["get","structure"],"bridge"],["match",["get","class"],["trunk_link","primary_link","secondary_link","tertiary_link","service","track"],!0,!1]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"#e8edeb","line-gap-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12]}},{"id":"bridge-street_limited-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"street_limited"],["==",["get","structure"],"bridge"]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"#e8edeb","line-gap-width":["interpolate",["exponential",1.5],["zoom"],13,0,14,2,18,18]}},{"id":"bridge-street-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"street"],["==",["get","structure"],"bridge"]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"#e8edeb","line-opacity":["interpolate",["linear"],["zoom"],13.99,0,14,1],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],13,0,14,2,18,18]}},{"id":"bridge-secondary-tertiary-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","structure"],"bridge"],["match",["get","class"],["secondary","tertiary"],!0,!1]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.2],["zoom"],10,0.75,18,2],"line-color":"#e8edeb","line-gap-width":["interpolate",["exponential",1.5],["zoom"],8.5,0.5,10,0.75,18,26],"line-translate":[0,0]}},{"id":"bridge-primary-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"primary"],["==",["get","structure"],"bridge"]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,16,2],"line-color":"#e8edeb","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-translate":[0,0]}},{"id":"bridge-trunk_link-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","structure"],"bridge"],["==",["get","type"],"trunk_link"]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"#e8edeb","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-opacity":["interpolate",["linear"],["zoom"],10.99,0,11,1]}},{"id":"bridge-motorway_link-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["all",["<=",["get","layer"],1],["==",["get","class"],"motorway_link"],["==",["get","structure"],"bridge"]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"#e8edeb","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-opacity":1}},{"id":"bridge-trunk-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"trunk"],["==",["get","structure"],"bridge"]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,16,2],"line-color":"#e8edeb","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32]}},{"id":"bridge-motorway-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"motorway"],["==",["get","structure"],"bridge"]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],7,0.5,10,1,16,2],"line-color":"#e8edeb","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32]}},{"id":"bridge-construction","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"construction"],["==",["get","structure"],"bridge"]]],"layout":{"line-join":"miter"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12.5,0.5,14,2,18,18],"line-color":"#fff","line-opacity":["interpolate",["linear"],["zoom"],13.99,0,14,1],"line-dasharray":["step",["zoom"],["literal",[0.4,0.8]],15,["literal",[0.3,0.6]],16,["literal",[0.2,0.3]],17,["literal",[0.2,0.25]],18,["literal",[0.15,0.15]]]}},{"id":"bridge-path","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["!=",["get","type"],"steps"],["==",["get","class"],"path"],["==",["get","structure"],"bridge"]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"#fff","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[1,0.5]]],"line-opacity":["interpolate",["linear"],["zoom"],14,0,14.25,1]}},{"id":"bridge-steps","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","structure"],"bridge"],["==",["get","type"],"steps"]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"#fff","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[0.3,0.3]]],"line-opacity":["interpolate",["linear"],["zoom"],14,0,14.25,1]}},{"id":"bridge-trunk_link","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","structure"],"bridge"],["==",["get","type"],"trunk_link"],["match",["get","layer"],[2,3,4,5],!1,!0]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":"#fff"}},{"id":"bridge-motorway_link","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"motorway_link"],["==",["get","structure"],"bridge"],["match",["get","layer"],[2,3,4,5],!1,!0]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":"#fff"}},{"id":"bridge-pedestrian","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"pedestrian"],["==",["get","structure"],"bridge"]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"#fff","line-opacity":1,"line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.5,0.4]],16,["literal",[1,0.2]]]}},{"id":"bridge-service-link-track","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["geometry-type"],"LineString"],["all",["!=",["get","type"],"trunk_link"],["==",["get","structure"],"bridge"],["match",["get","class"],["trunk_link","primary_link","secondary_link","tertiary_link","service","track"],!0,!1]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"#fff"}},{"id":"bridge-street_limited","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"street_limited"],["==",["get","structure"],"bridge"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12.5,0.5,14,2,18,18],"line-color":"#fff","line-opacity":["interpolate",["linear"],["zoom"],13.99,0,14,1]}},{"id":"bridge-street","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"street"],["==",["get","structure"],"bridge"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12.5,0.5,14,2,18,18],"line-color":"#fff","line-opacity":["interpolate",["linear"],["zoom"],13.99,0,14,1]}},{"id":"bridge-secondary-tertiary","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","structure"],"bridge"],["match",["get","type"],["secondary","tertiary"],!0,!1]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],8.5,0.5,10,0.75,18,26],"line-color":"#fff","line-opacity":["interpolate",["exponential",1.2],["zoom"],5,0,5.5,1]}},{"id":"bridge-primary","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","structure"],"bridge"],["==",["get","type"],"primary"]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":"#fff","line-opacity":["interpolate",["exponential",1.2],["zoom"],5,0,5.5,1]}},{"id":"bridge-trunk","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"trunk"],["==",["get","structure"],"bridge"],["match",["get","layer"],[2,3,4,5],!1,!0]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":"#fff"}},{"id":"bridge-motorway","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"motorway"],["==",["get","structure"],"bridge"],["match",["get","layer"],[2,3,4,5],!1,!0]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":"#fff"}},{"id":"bridge-rail","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","structure"],"bridge"],["match",["get","class"],["major_rail","minor_rail","service_rail"],!0,!1]]],"layout":{"line-join":"round"},"paint":{"line-color":"#e8edeb","line-width":["interpolate",["linear"],["zoom"],14,0.75,20,1]}},{"id":"bridge-trunk_link-2-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","structure"],"bridge"],["==",["get","type"],"trunk_link"],[">=",["get","layer"],2]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"#e8edeb","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-opacity":["interpolate",["linear"],["zoom"],10.99,0,11,1]}},{"id":"bridge-motorway_link-2-case copy","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"motorway_link"],["==",["get","structure"],"bridge"],[">=",["get","layer"],2]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"#e8edeb","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-opacity":1}},{"id":"bridge-trunk-2-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"trunk"],["==",["get","structure"],"bridge"],[">=",["get","layer"],2]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,16,2],"line-color":"#e8edeb","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32]}},{"id":"bridge-motorway-2-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"motorway"],["==",["get","structure"],"bridge"],[">=",["get","layer"],2]]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],7,0.5,10,1,16,2],"line-color":"#e8edeb","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32]}},{"id":"bridge-trunk_link-2","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","structure"],"bridge"],["==",["get","type"],"trunk_link"],[">=",["get","layer"],2]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":"#fff"}},{"id":"bridge-motorway_link-2","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"motorway_link"],["==",["get","structure"],"bridge"],[">=",["get","layer"],2]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":"#fff"}},{"id":"bridge-trunk-2","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"trunk"],["==",["get","structure"],"bridge"],[">=",["get","layer"],2]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":"#fff"}},{"id":"bridge-motorway-2","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","filter":["all",["==",["geometry-type"],"LineString"],["all",["==",["get","class"],"motorway"],["==",["get","structure"],"bridge"],[">=",["get","layer"],2]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":"#fff"}},{"id":"admin-3-4-boundaries-bg","type":"line","metadata":{"mapbox:group":"1444934295202.7542"},"source":"composite","source-layer":"admin","filter":["all",["<=",["get","admin_level"],1],["==",["get","maritime"],"false"],[">=",["get","admin_level"],0],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"line-join":"bevel"},"paint":{"line-color":"hsl(0, 0%, 84%)","line-width":["interpolate",["linear"],["zoom"],3,3.5,10,8],"line-opacity":["interpolate",["linear"],["zoom"],4,0,7,0.5,8,0.75],"line-dasharray":[1,0],"line-translate":[0,0],"line-blur":["interpolate",["linear"],["zoom"],3,0,8,3]}},{"id":"admin-2-boundaries-bg","type":"line","metadata":{"mapbox:group":"1444934295202.7542"},"source":"composite","source-layer":"admin","minzoom":1,"filter":["all",["<=",["get","admin_level"],1],["==",["get","admin_level"],0],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"line-join":"miter"},"paint":{"line-width":["interpolate",["linear"],["zoom"],3,3.5,10,10],"line-color":"hsl(0, 0%, 84%)","line-opacity":["interpolate",["linear"],["zoom"],3,0,4,0.5],"line-translate":[0,0],"line-blur":["interpolate",["linear"],["zoom"],3,0,10,2]}},{"id":"admin-3-4-boundaries","type":"line","metadata":{"mapbox:group":"1444934295202.7542"},"source":"composite","source-layer":"admin","filter":["all",["<=",["get","admin_level"],1],["==",["get","maritime"],"false"],[">=",["get","admin_level"],0],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"line-join":"round","line-cap":"round"},"paint":{"line-dasharray":["step",["zoom"],["literal",[2,0]],7,["literal",[2,2,6,2]]],"line-width":["interpolate",["linear"],["zoom"],7,0.75,12,1.5],"line-opacity":["interpolate",["linear"],["zoom"],2,0,3,1],"line-color":["interpolate",["linear"],["zoom"],4,"hsl(0, 0%, 80%)",5,"hsl(0, 0%, 70%)"]}},{"id":"admin-2-boundaries","type":"line","metadata":{"mapbox:group":"1444934295202.7542"},"source":"composite","source-layer":"admin","minzoom":1,"filter":["all",["<=",["get","admin_level"],1],["==",["get","admin_level"],0],["==",["get","disputed"],"false"],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"line-join":"round","line-cap":"round"},"paint":{"line-color":["interpolate",["linear"],["zoom"],3,"hsl(0, 0%, 70%)",4,"hsl(0, 0%, 62%)"],"line-width":["interpolate",["linear"],["zoom"],3,0.5,10,2]}},{"id":"admin-2-boundaries-dispute","type":"line","metadata":{"mapbox:group":"1444934295202.7542"},"source":"composite","source-layer":"admin","minzoom":1,"filter":["all",["<=",["get","admin_level"],1],["==",["get","admin_level"],0],["==",["get","disputed"],"true"],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"line-join":"round"},"paint":{"line-dasharray":[1.5,1.5],"line-color":["interpolate",["linear"],["zoom"],3,"hsl(0, 0%, 70%)",4,"hsl(0, 0%, 62%)"],"line-width":["interpolate",["linear"],["zoom"],3,0.5,10,2]}},{"id":"waterway-label","type":"symbol","source":"composite","source-layer":"natural_label","minzoom":12,"filter":["all",["match",["get","class"],["canal","river","stream"],!0,!1],["match",["get","class"],["canal","river"],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"symbol-placement":"line","text-pitch-alignment":"viewport","text-max-angle":30,"text-size":["interpolate",["linear"],["zoom"],13,12,18,16]},"paint":{"text-halo-width":0,"text-halo-blur":0,"text-color":"#78888a"}},{"id":"poi-scalerank3","type":"symbol","metadata":{"mapbox:group":"1444933372896.5967"},"source":"composite","source-layer":"poi_label","filter":["all",["match",["get","filterrank"],[2,3],!0,!1],["match",["get","maki"],["campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],!1,!0]],"layout":{"text-line-height":1.1,"text-size":["interpolate",["linear"],["zoom"],16,11,20,13],"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":1,"text-offset":[0,0],"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.01,"text-max-width":8},"paint":{"text-color":"#949494","text-halo-color":"#ffffff","text-halo-width":1,"text-halo-blur":0}},{"id":"poi-parks-scalerank3","type":"symbol","metadata":{"mapbox:group":"1444933372896.5967"},"source":"composite","source-layer":"poi_label","filter":["all",["match",["get","filterrank"],[2,3],!0,!1],["match",["get","maki"],["campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],!0,!1]],"layout":{"text-line-height":1.1,"text-size":["interpolate",["linear"],["zoom"],16,11,20,12],"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,0],"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.01,"text-max-width":8},"paint":{"text-halo-blur":0,"text-halo-color":"#ffffff","text-halo-width":1,"text-color":"#949494"}},{"id":"road-label-small","type":"symbol","metadata":{"mapbox:group":"1444933721429.3076"},"source":"composite","source-layer":"road","minzoom":15,"filter":["all",["==",["geometry-type"],"LineString"],["match",["get","class"],["ferry","golf","trunk_link","primary_link","secondary_link","tertiary_link","motorway","path","pedestrian","primary","secondary","street","street_limited","tertiary","track","trunk"],!1,!0],["step",["zoom"],["==",["geometry-type"],"Point"],11,[">",["get","len"],5000],12,[">",["get","len"],2500],13,!0]],"layout":{"text-size":["interpolate",["linear"],["zoom"],15,10,20,13],"text-max-angle":30,"symbol-spacing":500,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.01},"paint":{"text-color":"#6B6B6B","text-halo-color":"#ffffff","text-halo-width":1.25,"text-halo-blur":0}},{"id":"road-label-medium","type":"symbol","metadata":{"mapbox:group":"1444933721429.3076"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["match",["get","class"],["trunk_link","primary_link","secondary_link","tertiary_link","pedestrian","street","street_limited"],!0,!1],["step",["zoom"],["==",["geometry-type"],"Point"],11,[">",["get","len"],5000],12,[">",["get","len"],2500],13,!0]],"layout":{"text-size":["interpolate",["linear"],["zoom"],11,10,20,14],"text-max-angle":30,"symbol-spacing":500,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.01},"paint":{"text-color":"#6B6B6B","text-halo-color":"#ffffff","text-halo-width":1,"text-halo-blur":0}},{"id":"road-label-large","type":"symbol","metadata":{"mapbox:group":"1444933721429.3076"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["match",["get","class"],["motorway","primary","secondary","tertiary","trunk"],!0,!1],["step",["zoom"],["==",["geometry-type"],"Point"],11,[">",["get","len"],5000],12,[">",["get","len"],2500],13,!0]],"layout":{"text-size":["interpolate",["linear"],["zoom"],9,10,20,16],"text-max-angle":30,"symbol-spacing":400,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.01},"paint":{"text-color":"#6B6B6B","text-halo-color":"rgba(255,255,255, 0.75)","text-halo-width":1,"text-halo-blur":0}},{"id":"poi-scalerank2","type":"symbol","metadata":{"mapbox:group":"1444933358918.2366"},"source":"composite","source-layer":"poi_label","filter":["all",["==",["get","filterrank"],2],["match",["get","maki"],["campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],!1,!0]],"layout":{"text-line-height":1.1,"text-size":["interpolate",["linear"],["zoom"],14,11,20,12],"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,0],"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.01,"text-max-width":8},"paint":{"text-color":"#949494","text-halo-color":"#ffffff","text-halo-width":1,"text-halo-blur":0}},{"id":"poi-parks-scalerank2","type":"symbol","metadata":{"mapbox:group":"1444933358918.2366"},"source":"composite","source-layer":"poi_label","filter":["all",["==",["get","filterrank"],2],["match",["get","maki"],["campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],!0,!1]],"layout":{"text-line-height":1.1,"text-size":["interpolate",["linear"],["zoom"],14,11,20,12],"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,0],"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.01,"text-max-width":8},"paint":{"text-color":"#949494","text-halo-color":"#ffffff","text-halo-width":1,"text-halo-blur":0}},{"id":"water-label","type":"symbol","metadata":{"mapbox:group":"1444933808272.805"},"source":"composite","source-layer":"natural_label","minzoom":5,"filter":["all",["<",["get","sizerank"],13],["match",["get","class"],["reservoir","water"],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-max-width":7,"text-size":["interpolate",["linear"],["zoom"],13,13,18,18]},"paint":{"text-color":"#78888a","text-halo-blur":0}},{"id":"poi-parks-scalerank1","type":"symbol","metadata":{"mapbox:group":"1444933322393.2852"},"source":"composite","source-layer":"poi_label","filter":["all",["<=",["get","filterrank"],1],["match",["get","maki"],["campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],!0,!1]],"layout":{"text-line-height":1.1,"text-size":["interpolate",["linear"],["zoom"],10,11,18,12],"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,0],"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.01,"text-max-width":8},"paint":{"text-color":"hsl(0, 0%, 58%)","text-halo-color":"#ffffff","text-halo-width":1,"text-halo-blur":0}},{"id":"poi-scalerank1","type":"symbol","metadata":{"mapbox:group":"1444933322393.2852"},"source":"composite","source-layer":"poi_label","filter":["all",["<=",["get","filterrank"],1],["match",["get","maki"],["campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],!1,!0]],"layout":{"text-line-height":1.1,"text-size":["interpolate",["linear"],["zoom"],10,11,18,12],"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,0],"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.01,"text-max-width":8},"paint":{"text-color":"hsl(0, 0%, 58%)","text-halo-color":"#ffffff","text-halo-width":1,"text-halo-blur":0}},{"id":"airport-label","type":"symbol","source":"composite","source-layer":"airport_label","minzoom":10,"filter":["all",["<=",["get","sizerank"],14],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-line-height":1.1,"text-size":["interpolate",["linear"],["zoom"],10,12,18,18],"icon-image":["step",["zoom"],["concat",["get","maki"],"-11"],13,["concat",["get","maki"],"-15"]],"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,0.75],"text-anchor":"top","text-field":["step",["zoom"],["to-string",["get","ref"]],14,["to-string",["coalesce",["get","name_en"],["get","name"]]]],"text-letter-spacing":0.01,"text-max-width":9},"paint":{"text-color":"#6B6B6B","text-halo-color":"#ffffff","text-halo-width":0.5,"text-halo-blur":0}},{"id":"place-islets-archipelago-aboriginal","type":"symbol","source":"composite","source-layer":"natural_label","maxzoom":16,"filter":["all",["==",["get","maki"],"marker"],["match",["get","class"],["aboriginal_lands","landform"],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-line-height":1.2,"text-size":["interpolate",["linear"],["zoom"],10,11,18,16],"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,0],"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.01,"text-max-width":8},"paint":{"text-color":"#6B6B6B","text-halo-color":"#ffffff","text-halo-width":1,"text-halo-blur":0}},{"id":"place-islets-archipelago-aboriginal-2","type":"symbol","source":"composite","source-layer":"place_label","maxzoom":16,"filter":["all",["match",["get","class"],["settlement","settlement_subdivision"],!0,!1],["match",["get","type"],["aboriginal_lands","archipelago","islet"],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-line-height":1.2,"text-size":["interpolate",["linear"],["zoom"],10,11,18,16],"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,0],"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.01,"text-max-width":8},"paint":{"text-color":"#6B6B6B","text-halo-color":"#ffffff","text-halo-width":1,"text-halo-blur":0}},{"id":"place-neighbourhood","type":"symbol","source":"composite","source-layer":"place_label","minzoom":12,"maxzoom":16,"filter":["all",["match",["get","class"],["settlement","settlement_subdivision"],!0,!1],["match",["get","type"],["neighbourhood","quarter"],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-transform":"uppercase","text-letter-spacing":0.1,"text-max-width":7,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-padding":3,"text-size":["interpolate",["linear"],["zoom"],12,11,16,16]},"paint":{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"text-color":"hsl(0, 0%, 62%)","text-halo-blur":0}},{"id":"place-suburb","type":"symbol","source":"composite","source-layer":"place_label","minzoom":11,"maxzoom":16,"filter":["all",["==",["get","type"],"suburb"],["match",["get","class"],["settlement","settlement_subdivision"],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-transform":"uppercase","text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-letter-spacing":0.15,"text-max-width":7,"text-padding":3,"text-size":["interpolate",["linear"],["zoom"],11,11,15,18]},"paint":{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"text-color":"hsl(0, 0%, 62%)","text-halo-blur":0}},{"id":"place-hamlet","type":"symbol","source":"composite","source-layer":"place_label","minzoom":10,"maxzoom":16,"filter":["all",["==",["get","type"],"hamlet"],["match",["get","class"],["settlement","settlement_subdivision"],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-size":["interpolate",["linear"],["zoom"],12,11.5,15,16]},"paint":{"text-halo-color":"#ffffff","text-halo-width":1.25,"text-color":"hsl(0, 0%, 62%)","text-halo-blur":0}},{"id":"place-village","type":"symbol","source":"composite","source-layer":"place_label","minzoom":11,"maxzoom":15,"filter":["all",["==",["get","type"],"village"],["match",["get","class"],["settlement","settlement_subdivision"],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-max-width":7,"text-size":["interpolate",["linear"],["zoom"],10,11.5,16,18],"text-offset":[0,0]},"paint":{"text-halo-color":"#ffffff","text-halo-width":1.25,"text-color":["interpolate",["linear"],["zoom"],10,"hsl(0, 0%, 62%)",11,"hsl(0, 0%, 55%)"],"text-halo-blur":0}},{"id":"place-town","type":"symbol","source":"composite","source-layer":"place_label","minzoom":7,"maxzoom":15,"filter":["all",["==",["get","type"],"town"],["match",["get","class"],["settlement","settlement_subdivision"],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-size":["interpolate",["linear"],["zoom"],7,11.5,15,20],"text-font":["step",["zoom"],["literal",["DIN Offc Pro Regular","Arial Unicode MS Regular"]],12,["literal",["DIN Offc Pro Medium","Arial Unicode MS Regular"]]],"text-padding":2,"text-offset":[0,0],"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-max-width":7},"paint":{"text-color":["interpolate",["linear"],["zoom"],10,"hsl(0, 0%, 62%)",11,"hsl(0, 0%, 55%)"],"text-halo-color":"#ffffff","text-halo-width":1.25,"icon-opacity":["interpolate",["linear"],["zoom"],7.99,1,8,0],"text-halo-blur":0}},{"id":"place-islands","type":"symbol","source":"composite","source-layer":"natural_label","maxzoom":16,"filter":["all",["==",["get","class"],"landform"],["==",["get","maki"],"marker"],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-line-height":1.2,"text-size":["interpolate",["linear"],["zoom"],10,11,18,16],"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,0],"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.01,"text-max-width":7},"paint":{"text-color":"#6B6B6B","text-halo-color":"#ffffff","text-halo-width":1,"text-halo-blur":0}},{"id":"place-islands-2","type":"symbol","source":"composite","source-layer":"place_label","maxzoom":16,"filter":["all",["==",["get","type"],"island"],["match",["get","class"],["settlement","settlement_subdivision"],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-line-height":1.2,"text-size":["interpolate",["linear"],["zoom"],10,11,18,16],"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,0],"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.01,"text-max-width":7},"paint":{"text-color":"#6B6B6B","text-halo-color":"#ffffff","text-halo-width":1,"text-halo-blur":0}},{"id":"place-city-sm","type":"symbol","metadata":{"mapbox:group":"1444862510685.128"},"source":"composite","source-layer":"place_label","maxzoom":14,"filter":["all",["==",["get","type"],"city"],["match",["get","class"],["settlement","settlement_subdivision"],!0,!1],["match",["get","symbolrank"],[1,2,3,4,5,6,7,8,9,10,11],!1,!0],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-size":["interpolate",["linear"],["zoom"],6,12,14,22],"text-font":["step",["zoom"],["literal",["DIN Offc Pro Regular","Arial Unicode MS Regular"]],8,["literal",["DIN Offc Pro Medium","Arial Unicode MS Regular"]]],"text-offset":[0,0],"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-max-width":7},"paint":{"text-color":"hsl(0, 0%, 42%)","text-halo-color":"#ffffff","text-halo-width":1.25,"icon-opacity":["interpolate",["linear"],["zoom"],7.99,1,8,0],"text-halo-blur":0}},{"id":"place-city-md-s","type":"symbol","metadata":{"mapbox:group":"1444862510685.128"},"source":"composite","source-layer":"place_label","maxzoom":14,"filter":["all",["==",["get","type"],"city"],["match",["get","class"],["settlement","settlement_subdivision"],!0,!1],["match",["get","symbolrank"],[9,10,11],!0,!1],["match",["get","text_anchor"],["right","top","top-right","top-left"],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-size":["interpolate",["exponential",0.9],["zoom"],5,12,12,22],"text-anchor":"top","text-offset":["interpolate",["linear"],["zoom"],7.99,["literal",[0,0.1]],8,["literal",[0,0]]],"text-font":["step",["zoom"],["literal",["DIN Offc Pro Regular","Arial Unicode MS Regular"]],8,["literal",["DIN Offc Pro Medium","Arial Unicode MS Regular"]]],"icon-image":"dot-10"},"paint":{"text-halo-width":1,"text-halo-color":"#ffffff","text-color":"hsl(0, 0%, 42%)","text-halo-blur":0,"icon-opacity":["interpolate",["linear"],["zoom"],7.99,1,8,0]}},{"id":"place-city-md-n","type":"symbol","metadata":{"mapbox:group":"1444862510685.128"},"source":"composite","source-layer":"place_label","maxzoom":14,"filter":["all",["==",["get","type"],"city"],["match",["get","class"],["settlement","settlement_subdivision"],!0,!1],["match",["get","symbolrank"],[9,10,11],!0,!1],["match",["get","text_anchor"],["bottom","bottom-right","bottom-left","left"],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-size":["interpolate",["exponential",0.9],["zoom"],5,12,12,22],"text-font":["step",["zoom"],["literal",["DIN Offc Pro Regular","Arial Unicode MS Regular"]],8,["literal",["DIN Offc Pro Medium","Arial Unicode MS Regular"]]],"text-offset":["interpolate",["linear"],["zoom"],7.99,["literal",[0,-0.25]],8,["literal",[0,0]]],"text-anchor":"bottom","text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-max-width":7,"icon-image":"dot-10"},"paint":{"text-color":"hsl(0, 0%, 42%)","text-halo-color":"#ffffff","text-halo-width":1,"icon-opacity":["interpolate",["linear"],["zoom"],7.99,1,8,0],"text-halo-blur":0}},{"id":"place-city-lg-s","type":"symbol","metadata":{"mapbox:group":"1444862510685.128"},"source":"composite","source-layer":"place_label","minzoom":1,"maxzoom":14,"filter":["all",["<=",["get","symbolrank"],8],["==",["get","type"],"city"],["match",["get","class"],["settlement","settlement_subdivision"],!0,!1],["match",["get","text_anchor"],["right","top","top-right","top-left"],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-size":["interpolate",["exponential",0.9],["zoom"],4,12,10,22],"icon-image":"dot-11","text-font":["step",["zoom"],["literal",["DIN Offc Pro Regular","Arial Unicode MS Regular"]],8,["literal",["DIN Offc Pro Medium","Arial Unicode MS Regular"]]],"text-offset":["interpolate",["linear"],["zoom"],7.99,["literal",[0,0.15]],8,["literal",[0,0]]],"icon-size":1,"text-anchor":["step",["zoom"],"top",8,"center"],"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-max-width":7},"paint":{"text-color":"hsl(0, 0%, 42%)","text-halo-color":"#ffffff","text-halo-width":1,"icon-opacity":["interpolate",["linear"],["zoom"],7.99,1,8,0],"text-halo-blur":0}},{"id":"place-city-lg-n","type":"symbol","metadata":{"mapbox:group":"1444862510685.128"},"source":"composite","source-layer":"place_label","minzoom":1,"maxzoom":14,"filter":["all",["<=",["get","symbolrank"],8],["==",["get","type"],"city"],["match",["get","class"],["settlement","settlement_subdivision"],!0,!1],["match",["get","text_anchor"],["bottom","bottom-right","bottom-left","left"],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-size":["interpolate",["exponential",0.9],["zoom"],4,12,10,22],"icon-image":"dot-11","text-font":["step",["zoom"],["literal",["DIN Offc Pro Regular","Arial Unicode MS Regular"]],8,["literal",["DIN Offc Pro Medium","Arial Unicode MS Regular"]]],"text-offset":["interpolate",["linear"],["zoom"],7.99,["literal",[0,-0.25]],8,["literal",[0,0]]],"icon-size":1,"text-anchor":["step",["zoom"],"bottom",8,"center"],"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-max-width":7},"paint":{"text-color":"hsl(0, 0%, 42%)","text-opacity":1,"text-halo-color":"#ffffff","text-halo-width":1,"icon-opacity":["interpolate",["linear"],["zoom"],7.99,1,8,0],"text-halo-blur":0}},{"id":"marine-label-sm-ln","type":"symbol","metadata":{"mapbox:group":"1444856087950.3635"},"source":"composite","source-layer":"natural_label","minzoom":3,"maxzoom":10,"filter":["all",["==",["geometry-type"],"LineString"],[">=",["get","sizerank"],7],["match",["get","class"],["ocean","sea"],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-line-height":1.1,"text-size":["interpolate",["linear"],["zoom"],3,12,6,16],"symbol-spacing":["interpolate",["linear"],["zoom"],4,100,6,400],"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"symbol-placement":"line","text-pitch-alignment":"viewport","text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.1,"text-max-width":5},"paint":{"text-color":"#78888a","text-halo-blur":0}},{"id":"marine-label-sm-pt","type":"symbol","metadata":{"mapbox:group":"1444856087950.3635"},"source":"composite","source-layer":"natural_label","minzoom":3,"maxzoom":10,"filter":["all",["==",["geometry-type"],"Point"],[">=",["get","sizerank"],7],["match",["get","class"],["ocean","sea"],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-max-width":5,"text-letter-spacing":0.1,"text-line-height":1.5,"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-size":["interpolate",["linear"],["zoom"],3,12,6,16]},"paint":{"text-color":"#78888a","text-halo-blur":0}},{"id":"marine-label-md-ln","type":"symbol","metadata":{"mapbox:group":"1444856087950.3635"},"source":"composite","source-layer":"natural_label","minzoom":2,"maxzoom":8,"filter":["all",["==",["geometry-type"],"LineString"],["match",["get","class"],["ocean","sea"],!0,!1],["match",["get","sizerank"],[3,4,5,6],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-line-height":1.1,"text-size":["interpolate",["exponential",1.1],["zoom"],2,12,5,20],"symbol-spacing":250,"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"symbol-placement":"line","text-pitch-alignment":"viewport","text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.15,"text-max-width":5},"paint":{"text-color":"#78888a","text-halo-blur":0}},{"id":"marine-label-md-pt","type":"symbol","metadata":{"mapbox:group":"1444856087950.3635"},"source":"composite","source-layer":"natural_label","minzoom":2,"maxzoom":8,"filter":["all",["==",["geometry-type"],"Point"],["match",["get","class"],["ocean","sea"],!0,!1],["match",["get","sizerank"],[3,4,5,6],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-max-width":5,"text-letter-spacing":0.15,"text-line-height":1.5,"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-size":["interpolate",["exponential",1.1],["zoom"],2,14,5,20]},"paint":{"text-color":"#78888a","text-halo-blur":0}},{"id":"marine-label-lg-ln","type":"symbol","metadata":{"mapbox:group":"1444856087950.3635"},"source":"composite","source-layer":"natural_label","minzoom":1,"maxzoom":4,"filter":["all",["==",["geometry-type"],"LineString"],["match",["get","class"],["ocean","sea"],!0,!1],["match",["get","sizerank"],[1,2],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-max-width":4,"text-letter-spacing":0.25,"text-line-height":1.1,"symbol-placement":"line","text-pitch-alignment":"viewport","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-size":["interpolate",["linear"],["zoom"],1,14,4,30]},"paint":{"text-color":"#78888a","text-halo-blur":0}},{"id":"marine-label-lg-pt","type":"symbol","metadata":{"mapbox:group":"1444856087950.3635"},"source":"composite","source-layer":"natural_label","minzoom":1,"maxzoom":4,"filter":["all",["==",["geometry-type"],"Point"],["match",["get","class"],["ocean","sea"],!0,!1],["match",["get","sizerank"],[1,2],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-field":["to-string",["coalesce",["get","name_en"],["get","name"]]],"text-max-width":4,"text-letter-spacing":0.25,"text-line-height":1.5,"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-size":["interpolate",["linear"],["zoom"],1,14,4,30]},"paint":{"text-color":"#78888a","text-halo-blur":0}},{"id":"state-label-sm","type":"symbol","metadata":{"mapbox:group":"1444856151690.9143"},"source":"composite","source-layer":"place_label","minzoom":3,"maxzoom":9,"filter":["all",["==",["get","class"],"state"],[">",["get","symbolrank"],6],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-size":["interpolate",["linear"],["zoom"],6,10,9,14],"text-transform":"uppercase","text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"text-field":["step",["zoom"],["to-string",["get","abbr"]],6,["to-string",["coalesce",["get","name_en"],["get","name"]]]],"text-letter-spacing":0.15,"text-max-width":5},"paint":{"text-opacity":1,"text-color":"#a8a8a8","text-halo-color":"#ffffff","text-halo-width":1,"text-halo-blur":0}},{"id":"state-label-md","type":"symbol","metadata":{"mapbox:group":"1444856151690.9143"},"source":"composite","source-layer":"place_label","minzoom":3,"maxzoom":8,"filter":["all",["<=",["get","symbolrank"],6],["==",["get","class"],"state"],[">",["get","symbolrank"],5],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-size":["interpolate",["linear"],["zoom"],5,10,8,16],"text-transform":"uppercase","text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"text-field":["step",["zoom"],["to-string",["get","abbr"]],5,["to-string",["coalesce",["get","name_en"],["get","name"]]]],"text-letter-spacing":0.15,"text-max-width":6},"paint":{"text-opacity":1,"text-color":"#a8a8a8","text-halo-color":"#ffffff","text-halo-width":1,"text-halo-blur":0}},{"id":"state-label-lg","type":"symbol","metadata":{"mapbox:group":"1444856151690.9143"},"source":"composite","source-layer":"place_label","minzoom":3,"maxzoom":7,"filter":["all",["<=",["get","symbolrank"],5],["==",["get","class"],"state"],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-size":["interpolate",["linear"],["zoom"],4,10,7,18],"text-transform":"uppercase","text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"text-padding":1,"text-field":["step",["zoom"],["to-string",["get","abbr"]],4,["to-string",["coalesce",["get","name_en"],["get","name"]]]],"text-letter-spacing":0.15,"text-max-width":6},"paint":{"text-opacity":1,"text-color":"#a8a8a8","text-halo-color":"#ffffff","text-halo-width":1,"text-halo-blur":0}},{"id":"country-label-sm","type":"symbol","metadata":{"mapbox:group":"1444856144497.7825"},"source":"composite","source-layer":"place_label","minzoom":1,"maxzoom":10,"filter":["all",["==",["get","class"],"country"],[">=",["get","symbolrank"],13],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-field":["to-string",["get","name_en"]],"text-max-width":6,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-size":["interpolate",["exponential",0.9],["zoom"],5,14,9,22]},"paint":{"text-halo-width":1.25,"text-halo-color":["interpolate",["linear"],["zoom"],2,"rgba(255,255,255,0.75)",3,"#fff"],"text-color":"#6b6b6b","text-halo-blur":0}},{"id":"country-label-md","type":"symbol","metadata":{"mapbox:group":"1444856144497.7825"},"source":"composite","source-layer":"place_label","minzoom":1,"maxzoom":8,"filter":["all",["==",["get","class"],"country"],["match",["get","symbolrank"],[4,5,6,7,8,9,10,11,12],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-field":["step",["zoom"],["to-string",["get","iso_3166_1"]],2,["to-string",["get","name_en"]]],"text-max-width":6,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-size":["interpolate",["linear"],["zoom"],3,10,8,24]},"paint":{"text-halo-width":1.25,"text-halo-color":["interpolate",["linear"],["zoom"],2,"rgba(255,255,255,0.75)",3,"#fff"],"text-color":"#6b6b6b","text-halo-blur":0}},{"id":"country-label-lg","type":"symbol","metadata":{"mapbox:group":"1444856144497.7825"},"source":"composite","source-layer":"place_label","minzoom":1,"maxzoom":7,"filter":["all",["==",["get","class"],"country"],["match",["get","symbolrank"],[1,2,3],!0,!1],["match",["get","worldview"],["all","US"],!0,!1]],"layout":{"text-field":["to-string",["get","name_en"]],"text-max-width":["interpolate",["linear"],["zoom"],0,5,3,6],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-size":["interpolate",["linear"],["zoom"],1,10,6,24]},"paint":{"text-halo-width":1.25,"text-halo-color":["interpolate",["linear"],["zoom"],2,"rgba(255,255,255,0.75)",3,"#fff"],"text-color":"#6b6b6b","text-halo-blur":0}},{"id":"vaccinations","type":"fill","source":"vaccinations","source-layer":"fully_vaxed","layout":{"visibility":"visible"},"minzoom":0,"maxzoom":10,'paint':{'fill-color':['step',['get','people_fully_vaccinated_per_hundred'],'#ffffff',0,'#f7fbff',14,'#c8ddf0',36,'#73b3d8',57,'#2879b9',76,'#08306b'],"fill-opacity":['case',['boolean',['feature-state','hover'],!1],1.0,0.7]},"filter":['all',["<=",["get","JDs"],numDate],[">=",["get","JDf"],numDate]]}]};

    // update text in the UI
    document.getElementById('active-date').innerText = initDate;

    // access token
    mapboxgl.accessToken = 'pk.eyJ1Ijoia3dzdGFuY2lsIiwiYSI6ImNsNnlmZ3U3dTA1cnIza255MHQyMmo5MXQifQ.ZZIWcR1AHum3EElxlyI2cQ';

    // define the map
    const map = new mapboxgl.Map({
      container: 'map',
      center: [0, 25], // starting position
      maxBounds: [
        [-180, -90],
        [180, 90]
      ], // the coordinate boundaries of the world
      zoom: 1,
      minZoom: 1,
      maxZoom: 1,
      style: style // add the style defined above here
    });

    // add zoom and rotation controls to the map. (not needed if only one zoom level)
    //map.addControl(new mapboxgl.NavigationControl());

    // add a scale bar
    map.addControl(new mapboxgl.ScaleControl({
      position: 'bottom-left',
      unit: 'imperial' // you can change from imperial to metric, if desired
    }));

    // create a popup without adding to map
    let popup = new mapboxgl.Popup({
      closeButton: false,
      closeOnClick: false
    });

    // define initial hover state
    let hoveredStateId = null;

    // fire a function on a mousemove and feed it the geojson we gave an id of 'vaccinations'
    map.on('mousemove', 'vaccinations', (e) => {

      // change the cursor style as a UI indicator.
      map.getCanvas().style.cursor = 'pointer';

      // reset the hover state id on mousemove so the layer knows when to change opacity
      if (e.features.length > 0) {
        if (hoveredStateId !== null) {
          map.setFeatureState({
            source: 'vaccinations',
            sourceLayer: 'fully_vaxed',
            id: hoveredStateId
          }, {
            hover: false
          });
        }
        hoveredStateId = e.features[0].id;
        map.setFeatureState({
          source: 'vaccinations',
          sourceLayer: 'fully_vaxed',
          id: hoveredStateId
        }, {
          hover: true
        });
      }

      // define the layer properties
      // with "e.features[0].properties," you have access to all of the properties from the initial geojson layer
      let props = e.features[0].properties;

      // get the popup defined above
      popup
        .setLngLat(e.lngLat) // the location of the cursor
        .setHTML('<b>' + props.NAME_LONG + '</b><hr>Date: ' + gregorianDate(props.JDs) + '<br>' + props.people_fully_vaccinated_per_hundred + '/100 fully vaccinated') // feed the popup the prop info
        .addTo(map) // add the popup to the map

    });

    // when you mouse off the layer...
    map.on('mouseleave', 'vaccinations', () => {

      // change the cursor style back to initial setting
      map.getCanvas().style.cursor = '';

      // reset the hover state id
      if (hoveredStateId !== null) {
        map.setFeatureState({
          source: 'vaccinations',
          sourceLayer: 'fully_vaxed',
          id: hoveredStateId
        }, {
          hover: false
        });
      }
      hoveredStateId = null;

      // and remove the popup
      popup.remove();

    });

    // listen for a slider input
    document.getElementById('slider').addEventListener('input', (event) => {

      // define the newly-selected year
      const date = gregorianDate(event.target.value);

      // update text in the UI
      document.getElementById('active-date').innerText = date;

    });

    // when there is a change in the time slider value
    $('.session').on('change', (event) => {

      // define the julian day number with the value selected in the time slider
      const julianDN = parseInt(event.target.value);

      // wait until slider movement stops (prevents lagging with filtration)
      Promise.resolve().then(_ => {

        // filter the vaccinations layer according to the most recent vaccination data prior to the selected date
        map.setFilter('vaccinations', ['all', ["<=", ["get", "JDs"], julianDN],
          [">=", ["get", "JDf"], julianDN]
        ]);

      });

    });

    // QGIS Field Calculator for JDN: (epoch("Date")/ 86400000) + 2440587.5 // Just to remember how to convert a calendar date to a julian day number

    // define a function to convert the Julian Day Number back to a Gregorian Calendar Date
    function gregorianDate(julianDate) {

      var X = parseFloat(julianDate) + 0.5;
      var Z = Math.floor(X); //Get day without time
      var F = X - Z; //Get time
      var Y = Math.floor((Z - 1867216.25) / 36524.25);
      var A = Z + 1 + Y - Math.floor(Y / 4);
      var B = A + 1524;
      var C = Math.floor((B - 122.1) / 365.25);
      var D = Math.floor(365.25 * C);
      var G = Math.floor((B - D) / 30.6001);
      //must get number less than or equal to 12)
      var month_p = (G < 13.5) ? (G - 1) : (G - 13);
      //if Month is January or February, or the rest of year
      var year = (month_p < 2.5) ? (C - 4715) : (C - 4716);
      month_p -= 1; //Handle JavaScript month format
      var month = month_p + 1
      var UT = B - D - Math.floor(30.6001 * G) + F;
      var day = Math.floor(UT);
      //Determine time
      UT -= Math.floor(UT);
      UT *= 24;
      var hour = Math.floor(UT);
      UT -= Math.floor(UT);
      UT *= 60;
      var minute = Math.floor(UT);
      //end conversion of Julian Day Number to Gregorian Calendar date
      //return the Gregorian Date
      return month + "/" + day + "/" + year;
      
    };
  </script>

</body>
